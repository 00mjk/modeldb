<% for(var i=0; i<models.length; i++) { %>
<div>
  <div class="model" data-show="true">

    <div class="model-section model-ids">
      <a href="/models/<%= models[i]["id"] %>">
        <div class="kv nkv"
          data-key="Model ID"
          data-val="<%= models[i]["id"] %>"
        >
          Model ID: <%= models[i]["id"] %>
        </div>
      </a>

      <div class="kv"
        data-key="Experiment Run ID"
        data-val="<%= models[i]["Experiment Run ID"] %>"
      >
        Experiment Run ID: <%= models[i]["Experiment Run ID"] %>
      </div>

      <div class="kv"
        data-key="Experiment ID"
        data-val="<%= models[i]["Experiment ID"] %>"
      >
        Experiment ID: <%= models[i]["Experiment ID"] %>
      </div>

    </div>


    <div class="model-section model-dataframe">

      <div class="kv"
        data-key="DataFrame ID"
        data-val="<%= models[i]["DataFrame ID"] %>"
      >
        DataFrame ID: <%= models[i]["DataFrame ID"] %>
      </div>

      <% if (models[i]["DF Tag"]) { %>
        <div class="kv"
          data-key="DF Tag"
          data-val="<%= models[i]["DF Tag"] %>"
        >
          DF Tag: <%= models[i]["DF Tag"] %>
        </div>
      <% } %>

      <% if (models[i]["DF Filepath"]) { %>
        <div class="nkv"
          data-key="DF Filepath"
          data-val="<%= models[i]["DF Filepath"] %>"
        >
          DF Filepath: <%= models[i]["DF Filepath"] %>
        </div>
      <% } %>

      <% if (models[i]["metadata"].length > 0) { %>
        <div class="nkv dfmetadata-container popup-container">
          <div class="popup-label">Metadata</div>
          <div class="dfmetadata popup-contents">
            <% for (var j=0; j<models[i]["metadata"].length; j++) { %>
              <div class="kv"
                data-src="metadata"
                data-key="<%= models[i]["metadata"][j].key %>"
                data-val="<%= models[i]["metadata"][j].value %>"
              >
                <%= models[i]["metadata"][j].key %>: <%= models[i]["metadata"][j].value %>
              </div>
            <% } %>
          </div>
        </div>
      <% } %>
    </div>


    <div class="model-section model-spec">

      <div class="kv"
        data-key="Type"
        data-val="<%= models[i]["Type"] %>"
      >
        Type: <%= models[i]["Type"] %>
      </div>

      <% if (models[i]["Spec Tag"]) { %>
        <div class="kv"
          data-key="Spec Tag"
          data-val="<%= models[i]["Spec Tag"] %>"
        >
          Spec Tag: <%= models[i]["Spec Tag"] %>
        </div>
      <% } %>

      <div class="nkv hyperparams-container popup-container">
        <div class="popup-label">Hyperparameters</div>
        <div class="hyperparams popup-contents">
          <% for (var j=0; j<models[i]["hyperparams"].length; j++) { %>
            <div class="kv"
              data-src="hyperparameters"
              data-key="<%= models[i]["hyperparams"][j].name %>"
              data-val="<%= models[i]["hyperparams"][j].value %>"
            >
              <%= models[i]["hyperparams"][j].name %>: <%= models[i]["hyperparams"][j].value %>
            </div>
          <% } %>
        </div>
      </div>
    </div>


    <div class="model-section model-metrics">
      <% for (var j=0; j<models[i].metrics.length; j++) { %>
        <div class="model-metric kv"
          data-key="<%=models[i].metrics[j].key %>"
          data-val="<%=models[i].metrics[j].val %>"
          data-num="true"
        >
          <%= models[i].metrics[j].key %>: <%= models[i].metrics[j].val %>
        </div>
      <% } %>
    </div>


    <div class="model-section model-misc">
      <div class="nkv annotation">
        Notes:
        <span class="annotation-message" data-id="<%= models[i].id %>">
          <% if (models[i].annotations.length > 0) { %>
            <%= models[i].annotations[models[i].annotations.length - 1].replace(/Transformer\([0-9]*\)\s/, "") %>
          <% } %>
        </span>
        <div class="annotation-create md-trigger"
          data-modal="modal-1"
          data-id="<%= models[i].id %>"
          data-experimentRunId="<%= models[i]["Experiment Run ID"] %>"
        >
          [+]
        </div>
        <div class="annotations-container">
        </div>
      </div>

      <% if (models[i]["Code SHA"]) { %>
        <div class="nkv"
          data-key="Code SHA"
          data-val="<%= models[i]["Code SHA"] %>"
        >
          Code SHA: <%= models[i]["Code SHA"] %>
        </div>
      <% } %>

      <% if (models[i]["Filepath"]) { %>
        <div class="nkv"
          data-key="Filepath"
          data-val="<%= models[i]["Filepath"] %>"
        >
          Filepath: <%= models[i]["Filepath"] %>
        </div>
      <% } %>
    </div>

  </div>
</div>
<% } %>
